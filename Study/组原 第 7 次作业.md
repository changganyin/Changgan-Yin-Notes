## 1. 已知某机器采用微程序控制方式，控存容量为512\*48位，微程序可以在整个控存中实现转移。控制微程序转移的条件共4个，微指令采用水平型格式， 后继微指令采用断定方式（通过微指令顺序控制字段由设计者指定或由设计者指定的判别字段控制产生后继微指令地址）。请问：（1）微指令的三个字段分别多少位？ （2）画出对应这种微指令格式的微程序控制器逻辑框图
(1) $2^{9}=512$, 下址字段为 9 位
    控制转移的条件共 4 个，判别测试字段为 4 位
    操作控制字段位数为 48 - 9 - 4 = 35  

(2) 
![[Pasted image 20250613113620.png]]

## 2. 某32位机器共有微操作控制信号52个，构成5个相斥类的微命令组，各组 分别包括4个，5个，8个，15个，和20个微命令。已知可判定的外部条件 有CY和ZF两个，微指令字长29位。（1）给出采用断定方式的水平微指令格式 （2）控制存储器的容量多大？
(1) $4\to 5\leq 2^{3}$, $5\to 6 \leq 2^{3}$, $8\to 9 \leq 2^{4}$, $15 \to 16 \leq 2^{4}$, $20 \to 21 \leq 2^{5}$
控制字段 = 3 + 3 + 4 + 4 +5 = 19
判别测试字段 = 2
下址字段 = 29 - 19 - 2 = 8

| 4 个<br>微指令 | 5 个<br>微指令 | 5 个<br>微指令 | 15 个<br>微指令 | 20 个<br>微指令 | 2 个<br>判断条件 | <br>下址字段 |
| ---------- | ---------- | ---------- | ----------- | ----------- | ----------- | -------- |
| 3 位        | 3 位        | 4 位        | 4 位         | 5 位         | 2 位         | 8 位      |
(2) 每个微指令长度为 29 位，容量为: $2^{8}\times 29 = 256 \times 29 = 7424$


## 3. 
![[Pasted image 20250613110201.png]]
(1) T1 和 T2 是 ALU 输入端的暂存寄存器，用于暂存从主存读来的数据，以防止其破坏通用寄存器的原有内容

(2)

| 周期     | 节拍      | 操作          | 微命令                                                 |
| ------ | ------- | ----------- | --------------------------------------------------- |
| 取指     | $T_{1}$ | PC->MAR     | PC->IB; IB->MAR                                     |
|        | $T_{2}$ | M[MAR]->MDR | RD; DB->MDR                                         |
|        | $T_{3}$ | MDR->IR     | MDR->IB; IB->IR                                     |
|        | $T_{4}$ | PC+1->PC    | PC+1                                                |
| 译码<br> | $T_{1}$ | 由IR解析得出指令   |                                                     |
| 执行     | $T_{1}$ | R1->T1      | R1->IB; IB->T1                                      |
|        | $T_{2}$ | M[R2]->T2   | R2->IB; IB->MAR;<br>RD; DB->MDR;<br>MDR->IB; IB->T2 |
|        | $T_{3}$ | T1+T2->A    | +                                                   |
|        | $T_{4}$ | A->R1       | A->IB; IB->R1                                       |

