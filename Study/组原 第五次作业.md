## 1. 假设某计算机的指令长度为24位，具有双操作数、单操作数和无操作数三类 指令。每个操作数地址规定用8位表示。假设现在有M条二地址指令，N条 零地址指令，问： （1） 如果操作码字段固定位8位，则最多可以设计多少条一地址指令？ （2） 如果操作码可以采用扩展操作码来设计，则最多可以设计多少条一地 址指令？
(1) $2^{8}-M-N$
(2) 设可以设计出 $X$ 条一地址指令
则
$$
\left[\left(2^{8}-M\right)\times 2^8 -X\right]\times 2^{8}=N
$$
解得
$$
X=\left(2^{8}-M\right)\times 2^{8} - N \times 2^{-8}
$$

## 2. 某机器指令长度为12位，每个地址码为3位，采用扩展操作码的方式，设计 4 条三地址指令，16条二地址指令，16条零地址指令。问：最多可以多少条 1 地址指令？如何安排操作码，请画出操作码的分布。
设可以设计出 $X$ 条一地址指令
则
$$
\left\{\left[\left(2^{3}-4\right)\times 2^{3} -16\right]\times 2^{3}-X\right\}\times 2^{3} = 16
$$
解得
$$
X=126
$$

|       | 0-2 | 3-5 | 6-8 | 9-11 |       |
| ----- | --- | --- | --- | ---- | ----- |
| 三地址指令 | 000 |     |     |      | 共4条   |
|       | ... |     |     |      |       |
|       | 100 |     |     |      |       |
| 二地址指令 | 100 | 000 |     |      | 共16条  |
|       | ... | ... |     |      |       |
|       | 101 | 111 |     |      |       |
| 一地址指令 | 110 | 000 | 000 |      | 共126条 |
|       | ... | ... | ... |      |       |
|       | 111 | 111 | 101 |      |       |
| 零地址指令 | 111 | 111 | 110 | 000  | 共16条  |
|       | ... | ... | ... | ...  |       |
|       | 111 | 111 | 111 | 111  |       |

## 3. 某机器字长为32位，主存容量为1MB，单字长指令，有50种操作码，采用 寄存器寻址，寄存器间接寻址，立即寻址和直接寻址共四种寻址方式。CPU 有16个通用寄存器。问：指令格式如何设计？（考虑单地址指令）
主存容量: $1MB$ = $1^{20} B$
- 操作码: $50 < 2^{6}=64$, 设计 OP 为 6 位
- 寻址方式: $4=2^{2}$, 设计寻址方式为 2 位
  - 00: 寄存器寻址
  - 01: 寄存器间接寻址
  - 10: 立即寻址
  - 11: 直接寻址
- 寄存器编号: $16 = 2^{4}$, 设计编号为 4 位
- 位移量 D: 设计为 20 位

## 4. 
![[Pasted image 20250529213109.png]]
(1) 4420H = 0100 0100 0010 0000 = 010001 00 00100000
X=00, 直接寻址
EA = 00100000 = 20H
(2) 2244H = 0010 0010 0100 0100 = 001000 10 01000100
X=10, 基址寄存器 B1 进行寻址
EA = (B1) + 44H = 1122H + 44H = 1166H
(3) 1322H = 0001 0011 0010 0010 = 000100 11 00100010
X=11, 相对寻址
EA = (PC) + 22H = 1234H + 22H = 1256H
(4) 3521H = 0011 0101 0010 0001 = 001101 01 00100001
X=01, 用变址寄存器 X1 进行寻址
EA = (X1) + 21H = 37H + 21H = 0058H

## 5.
![[Pasted image 20250529213956.png]]
(1) MOV S, D 最快, 因为其不访问内存
(2) 
a) (00)111100 00 1111 0001 3CD2: LDA 指令, 将 13CD2H 的数据加载到寄存器 R15
b) (00)001010 00 0101 0110: MOV 指令, 将 R6 的数据传送的 R5
c) (00)011011 01 1100 0110: 操作码 1BH, 不匹配, 非法指令
d) 01C2H = (00)000000 01 1100 0010, 操作码 00H, 不匹配, 非法指令

